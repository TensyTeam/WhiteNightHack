(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){},51:function(e,t,a){e.exports=a(95)},92:function(e,t){},95:function(e,t,a){"use strict";a.r(t);var n=a(27),o=a.n(n),r=a(46),i=a(0),c=a.n(i),l=a(47),s=a.n(l),m=a(14),u=a(15),d=a(17),f=a(16),p=a(18),v=a(26),g=a(5),h=a(8),y={type:"FeatureCollection",features:[{type:"Feature",properties:{name:"~5 min"},geometry:{type:"Polygon",coordinates:[[[30.347522,59.91534],[30.350097,59.914953],[30.348316,59.912124],[30.345677,59.912549]]]}},{type:"Feature",properties:{name:"~2 min"},geometry:{type:"Polygon",coordinates:[[[30.340816,59.910849],[30.343884,59.910284],[30.342478,59.908412],[30.339506,59.909176],[30.340816,59.910849]]]}}]},E=(a(31),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={balance:100,panel:"find",time:null,center:[30.3165,59.9392],coordinates:{lat:null,long:null},scooters:[[30.342459,59.914796]]},a.onChangePanel=a.onChangePanel.bind(Object(h.a)(a)),a.onGeolocation=a.onGeolocation.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){localStorage.setItem("scooters",JSON.stringify(this.state.scooters));var e=a(57);e.accessToken="pk.eyJ1IjoibWlrZS1wZXRyb3YiLCJhIjoiY2p4MW1idnI2MGFnczQ5cWZtcHExYXVucSJ9.R5eaAB5PePMxt7dM9PEFqg";var t=new e.Map({container:"mapbox",style:"mapbox://styles/mapbox/streets-v11",center:this.state.center,zoom:12});document.getElementById("btn-now").addEventListener("click",function(){setTimeout(function(){var a=JSON.parse(localStorage.getItem("coordinates"));t.flyTo({center:a,zoom:15}),new e.Marker({color:"#e20074"}).setLngLat(a).addTo(t)},1e3)}),t.on("load",function(){for(var a,n=t.getStyle().layers,o=0;o<n.length;o++)if("symbol"===n[o].type){a=n[o].id;break}t.addLayer({id:"areas-fill",type:"fill",source:{type:"geojson",data:y},layout:{},paint:{"fill-color":"#e20074","fill-opacity":.5}},a),t.on("click","areas-fill",function(a){(new e.Popup).setLngLat(a.lngLat).setHTML(a.features[0].properties.name).addTo(t)});for(var r=JSON.parse(localStorage.getItem("scooters")),i=function(a){var n=JSON.parse(localStorage.getItem("scooters"))[a],o="scooter#"+a;t.loadImage("https://i.ibb.co/Q9Bq7x8/scooter.png",function(e,a){if(e)throw e;t.addImage("scooter",a),t.addLayer({id:"point",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:n}}]}},layout:{"icon-image":"scooter","icon-size":.06}})}),t.on("click",o,function(n){var o=JSON.parse(localStorage.getItem("scooters"))[a],r="Scooter#"+a;t.flyTo({center:o,zoom:15}),(new e.Popup).setLngLat(o).setHTML(r).addTo(t)}),t.on("mouseenter",o,function(){t.getCanvas().style.cursor="pointer"}),t.on("mouseleave",o,function(){t.getCanvas().style.cursor=""})},c=0;c<r.length;c++)i(c)})}},{key:"onChangePanel",value:function(e){var t=this;if(this.setState({panel:e}),"book"===e){this.setState({time:"5:00"});var a=300,n=setInterval(function(){if("book"===t.state.panel){var e=a-=1,o=Math.floor(e/60);e%=60,t.setState({time:o+":"+e})}else clearInterval(n)},1e3)}if("start"===e){this.setState({time:"0:00"});var o=0,r=setInterval(function(){if("start"===t.state.panel){var e=o+=1,a=Math.floor(e/60);e%=60,t.setState({time:a+":"+e})}else clearInterval(r)},1e3)}}},{key:"onGeolocation",value:function(){var e=this;window.navigator.geolocation.getCurrentPosition(function(t){var a=t.coords.latitude,n=t.coords.longitude,o=[n,a];localStorage.setItem("coordinates",JSON.stringify(o)),e.setState({coordinates:{lat:a,long:n}})})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"map"},c.a.createElement("div",{className:"panel panel-left"},c.a.createElement("div",{onClick:function(){e.onChangePanel("profile")}},c.a.createElement("i",{className:"fas fa-user"})),c.a.createElement("div",{onClick:function(){e.onChangePanel("find")}},c.a.createElement("i",{className:"fas fa-search"})),c.a.createElement("div",{onClick:function(){e.onGeolocation()},id:"btn-now"},c.a.createElement("i",{className:"fas fa-location-arrow"}))),c.a.createElement("div",{className:"panel panel-right"},c.a.createElement("div",null,this.state.balance," ",c.a.createElement("i",{className:"fas fa-dice-d6"}))),c.a.createElement("div",{id:"mapbox"}),c.a.createElement("div",{id:"package"},"find"===this.state.panel&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("img",{src:"./img/scooter.png"})),c.a.createElement("div",{className:"scooter-info"},c.a.createElement("div",{id:"scooter-number"},c.a.createElement("i",{className:"fas fa-hashtag"})," 225403"),c.a.createElement("div",{id:"scooter-name"},"Xiaomi"),c.a.createElement("div",{id:"scooter-energy"},c.a.createElement("i",{className:"fas fa-bolt"})," 59 %")),c.a.createElement("div",{id:"scooter-play",onClick:function(){e.onChangePanel("book")}},"BOOK")),"profile"===this.state.panel&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"scooter-block"},c.a.createElement("div",{className:"scooter-profile"},"Mike Petrov"),c.a.createElement("div",{className:"scooter-profile"},"Trip: 5"),c.a.createElement("div",{className:"scooter-profile"},"4.2 / 5 ",c.a.createElement("i",{className:"fas fa-star"})))),"book"===this.state.panel&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"scooter-block"},c.a.createElement("div",{id:"scooter-time"},this.state.time),c.a.createElement("div",null,c.a.createElement("input",{id:"scooter-input",placeholder:"Finish point (discount 10%)"})),c.a.createElement("div",{id:"scooter-play",onClick:function(){e.onChangePanel("start")}},"START"))),"start"===this.state.panel&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"scooter-block"},c.a.createElement("div",{id:"scooter-time"},this.state.time),c.a.createElement("div",{id:"scooter-play",onClick:function(){e.onChangePanel("finish")}},"Finish"))),"finish"===this.state.panel&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"scooter-block"},c.a.createElement("div",{id:"scooter-time"},this.state.time),c.a.createElement("div",{id:"scooter-play",onClick:function(){e.onChangePanel("find")}},"Ok")))))}}]),t}(c.a.Component)),b=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement(v.a,null,c.a.createElement(g.c,null,c.a.createElement(g.a,{path:"/",component:E})))}}]),t}(c.a.Component),k=a(50),C=a.n(k);a.d(t,"getQrCode",function(){return N}),a.d(t,"awaitStatus",function(){return S});var N=function(e,t){var a=C()("".concat("https://e94dc841.ngrok.io","/").concat(e,"/"),{forceNew:!0,query:t});return new Promise(function(e){return a.on("qrCode",function(t){var n=t.qrCode,o=t.identifier;return e({qrCode:n,socket:a,identifier:o})})})},S=function(e){var t=e.socket,a=e.identifier;return new Promise(function(e,n){t.on(a,function(t){var a=JSON.parse(t);"failure"===a.status?n(a):e(a)})})};(function(){var e=Object(r.a)(o.a.mark(function e(){var t,a,n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("authenticate");case 2:return t=e.sent,a=t.qrCode,n=t.socket,r=t.identifier,document.getElementById("img").src=a,e.next=10,S({socket:n,identifier:r});case 10:e.sent,s.a.render(c.a.createElement(b,null),document.getElementById("root"));case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()}},[[51,1,2]]]);
//# sourceMappingURL=main.1442f5b7.chunk.js.map